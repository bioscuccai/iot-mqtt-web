<md-content>
  <md-toolbar>
    <div class="md-toolbar-tools">
      <h2>Readings</h2>
      <md-button ng-click="newReadingDialog()">
        New
      </md-button>
      <md-button ng-click="refreshReadings()">
        Refresh
      </md-button>
    </div>
  </md-toolbar>
  <md-input-container>
    <label for="filterTypes"></label>
    <md-checkbox name="filterTypes" ng-model="typeFilter.state">Filters?</md-checkbox>
  </md-input-container>
  <div>
    <md-button ng-click="prevPage()">
      <i class="icon ion-arrow-left-a"></i>
    </md-button>
    Page:
    <input type="text" ng-model="page.page" ng-change="refreshReadings()">
    / {{page.pageCount}}
    <select name="perPage" id="perPage" ng-model="page.perPage" ng-change="refreshReadings()">
      <option value="5">5</option>
      <option value="25">25</option>
      <option value="50">50</option>
      <option value="100">100</option>
    </select>
    per page
    <md-button ng-click="nextPage()">
      <i class="icon ion-arrow-right-a"></i>
    </md-button>
  </div>

  <md-select ng-model="selectedFilter.deviceName" placeholder="---Device---">
    <md-option ng-value="">--Device--</md-option>
    <md-option ng-repeat="deviceName in deviceNames" ng-value="deviceName">{{deviceName}}</md-option>
  </md-select>
  <md-select ng-model="selectedFilter.deviceType" placeholder="---Device type---">
    <md-option ng-value="">--Device type--</md-option>
    <md-option ng-repeat="deviceType in deviceTypes" ng-value="deviceType">{{deviceType}}</md-option>
  </md-select>
  <md-select ng-model="selectedFilter.application" placeholder="---Application---">
    <md-option ng-value="">--Application--</md-option>
    <md-option ng-repeat="application in applications" ng-value="application._id">{{application.name}}</md-option>
  </md-select>
  <!--
  <md-input-container>
    <label for="readingType">Reading type</label>
    <input type="text" name="readingType" ng-model="selectedFilter.type">
  </md-input-container>-->
    <div ng-repeat="reading in readings | orderBy: '-_id'" ng-click="selectReading(reading)">
      <div hljs hljs-source="reading.dataStr"></div>
      <p style="margin: 0px">
        <small style="color: rgb(77, 77, 77)">
          <i class="icon ion-calculator"></i>
          {{reading.device.name}}
          <i class="icon ion-filing"></i>
          {{reading.device.type}}
        </small>
      </p>
      <p style="margin: 0px">
        <small style="color: rgb(77, 77, 77)">
          <i class="icon ion-folder"></i>
          {{reading.type}}
          <i class="icon ion-calendar"></i>
          {{reading.createdAt}}
          <i class="icon ion-earth"></i>
          <a href="http://maps.google.com?q={{reading.loc[0]}},{{reading.loc[1]}}" target="_blank">{{reading.loc[0]}} / {{reading.loc[1]}}</a>
        </small>
      </p>
      <hr>
    </div>
</md-content>
